(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[484],{786:(e,r,a)=>{"use strict";a.d(r,{A:()=>c,O:()=>s});var t=a(5155),o=a(2115);let n=(0,o.createContext)();function s(e){let{children:r}=e,[a,s]=(0,o.useState)(null),[c,l]=(0,o.useState)(!0);return(0,o.useEffect)(()=>{(async()=>{try{let e=await fetch("".concat("https://backendsebas-ehe6b0e6eebbhjhe.mexicocentral-01.azurewebsites.net","/usuarios/verificar"),{credentials:"include"});if(e.ok){let r=await e.json();s(r.usuario)}else s(null)}catch(e){console.error("Error verificando sesi\xf3n:",e)}finally{l(!1)}})()},[]),(0,t.jsx)(n.Provider,{value:{usuario:a,setUsuario:s,cargando:c},children:r})}function c(){return(0,o.useContext)(n)}},5695:(e,r,a)=>{"use strict";var t=a(8999);a.o(t,"usePathname")&&a.d(r,{usePathname:function(){return t.usePathname}}),a.o(t,"useRouter")&&a.d(r,{useRouter:function(){return t.useRouter}}),a.o(t,"useSearchParams")&&a.d(r,{useSearchParams:function(){return t.useSearchParams}})},5716:()=>{},6040:(e,r,a)=>{Promise.resolve().then(a.bind(a,7267))},7267:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>i});var t=a(5155),o=a(2115),n=a(5695),s=a(5799);function c(){let e=(0,n.useRouter)(),[r,a]=(0,o.useState)({nombre:"",descripcion:"",precio:"",cantidad:"",categoria_id:"",imagen:null}),[c,l]=(0,o.useState)([]),i="https://backendsebas-ehe6b0e6eebbhjhe.mexicocentral-01.azurewebsites.net";(0,o.useEffect)(()=>{(async()=>{try{let e=await fetch("".concat(i,"/categorias")),r=await e.json();l(r)}catch(e){console.error("Error al cargar categor\xedas:",e),s.oR.error("No se pudieron cargar las categor\xedas")}})()},[]);let u=e=>{let{name:r,value:t}=e.target;a(e=>({...e,[r]:t}))},d=async e=>{e.preventDefault();let t=new FormData;for(let e in r)r[e]&&t.append(e,r[e]);try{let e=await fetch("".concat(i,"/productos"),{method:"POST",credentials:"include",body:t});if(e.ok)s.oR.success("Producto guardado con \xe9xito"),a({nombre:"",descripcion:"",precio:"",cantidad:"",categoria_id:"",imagen:null});else{let r=await e.text();console.error("Error al guardar producto:",r),s.oR.error("Error al guardar producto")}}catch(e){console.error("Error en la solicitud:",e),s.oR.error("Error de red al guardar producto")}};return(0,t.jsxs)("form",{onSubmit:d,className:"space-y-4 bg-oro-liturgico p-6 rounded shadow max-w-xl mx-auto mt-10",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-center text-vino-sacerdotal",children:"Crear Producto"}),(0,t.jsx)("input",{name:"nombre",value:r.nombre,onChange:u,placeholder:"Nombre",className:"p-2 border rounded w-full",required:!0}),(0,t.jsx)("textarea",{name:"descripcion",value:r.descripcion,onChange:u,placeholder:"Descripci\xf3n",className:"p-2 border rounded w-full"}),(0,t.jsx)("input",{type:"number",name:"precio",value:r.precio,onChange:u,placeholder:"Precio",className:"p-2 border rounded w-full",required:!0}),(0,t.jsx)("input",{type:"number",name:"cantidad",value:r.cantidad,onChange:u,placeholder:"Cantidad",className:"p-2 border rounded w-full",required:!0}),(0,t.jsxs)("select",{name:"categoria_id",value:r.categoria_id,onChange:u,className:"p-2 border rounded w-full",required:!0,children:[(0,t.jsx)("option",{value:"",children:"Seleccione una categor\xeda"}),c.map(e=>(0,t.jsx)("option",{value:e.id,children:e.nombre},e.id))]}),(0,t.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{a(r=>({...r,imagen:e.target.files[0]}))},className:"p-2 border rounded w-full"}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("button",{type:"button",onClick:()=>e.push("/admin"),className:"text-white px-4 py-2 border rounded btn-personalizado",children:"Volver al panel"}),(0,t.jsx)("button",{type:"submit",className:"text-white px-4 border py-2 rounded btn-personalizado",children:"Crear Producto"})]})]})}a(5716);var l=a(786);function i(){let{usuario:e,cargando:r}=(0,l.A)(),a=(0,n.useRouter)();return((0,o.useEffect)(()=>{r||e&&["admin","coordinador"].includes(e.rol)||a.push("/")},[e,r,a]),r||!e)?null:(0,t.jsx)("div",{className:"flex-grow flex bg-gris-piedra p-6",children:(0,t.jsxs)("div",{className:"w-full",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-vino-sacerdotal text-center mb-6",children:"Gesti\xf3n de Productos"}),(0,t.jsx)(c,{usuario:e})]})})}}},e=>{var r=r=>e(e.s=r);e.O(0,[797,799,441,684,358],()=>r(6040)),_N_E=e.O()}]);